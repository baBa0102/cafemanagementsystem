{% extends 'base.html' %}
{% block title %}Order Placed{% endblock %}
{% block content %}
  <div class="card" style="text-align:center; max-width: 600px; margin: 40px auto;">
    <h1>ðŸŽ‰ Order placed successfully!</h1>
    {% if order %}
      <div style="background: #e8f5e9; padding: 15px; border-radius: 8px; margin: 20px 0;">
        <p style="margin: 0; font-size: 16px;"><strong>Your Order ID:</strong></p>
        <p style="margin: 5px 0 0 0; font-size: 32px; font-weight: bold; color: #2e7d32;">#{{ order.id }}</p>
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">Save this ID to track your order</p>
      </div>
    {% endif %}
    {% if order_type == 'DELIVERY' %}
      <p>It will be delivered soon.</p>
    {% else %}
      <p>Kindly give us a moment to splash some flavour.</p>
    {% endif %}
    <div style="margin-top:20px;">
      {% if order %}
        <a class="btn" href="{% url 'track_order_detail' order.id %}" style="background: #2e7d32; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; font-weight: bold; display: inline-block; margin: 5px;">Track Order</a>
        <a class="btn" href="{% url 'my_orders' %}" style="background: #1976d2; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; font-weight: bold; display: inline-block; margin: 5px;">My Orders</a>
      {% endif %}
      <a class="btn secondary" href="{% url 'items_list' %}" style="padding: 12px 24px; display: inline-block; margin: 5px;">Order More</a>
    </div>
  </div>

  <!-- Simple modal pop-up (only shown when backend marks order PAID) -->
  <div id="popup" style="position:fixed;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:2000;">
    <div class="card" style="max-width:420px;text-align:center;background:#fff;">
      <h2>ðŸŽ‰ Order placed successfully!</h2>
      {% if order_type == 'DELIVERY' %}
        <p>It will be delivered soon.</p>
      {% else %}
        <p>Kindly give us a moment to splash some flavour.</p>
      {% endif %}
      <div style="display:flex;gap:8px;justify-content:center;">
        <a class="btn" href="/">Home</a>
        <a class="btn secondary" href="{% url 'items_list' %}">Order more</a>
      </div>
    </div>
  </div>
{% endblock %}
{% block scripts %}
<script>
  // Auto-hide the modal after 2.2s or when clicked
  (function(){
    const el = document.getElementById('popup');
    function close(){ if(el) el.style.display='none'; }
    setTimeout(close, 2200);
    if (el) el.addEventListener('click', close);
  })();
</script>
{% endblock %}
