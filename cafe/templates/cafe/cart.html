{% extends 'base.html' %}
{% block title %}Your Cart{% endblock %}
{% block content %}
<h1>Your Cart</h1>
<div class="card">
  {% if items %}
    <table style="width:100%;border-collapse:collapse;">
      <thead>
        <tr>
          <th style="text-align:left;">Item</th>
          <th>Price</th>
          <th>Qty</th>
          <th>Subtotal</th>
        </tr>
      </thead>
      <tbody>
        {% for ci in items %}
        <tr>
          <td>{{ ci.item.name }}</td>
          <td style="text-align:center;">₹ {{ ci.unit_price }}</td>
          <td style="text-align:center;">
            <form method="post" action="{% url 'update_cart' ci.item.id %}">
              {% csrf_token %}
              <input name="quantity" type="number" value="{{ ci.quantity }}" min="0" style="width:70px;"/>
              <button class="btn" type="submit">Update</button>
            </form>
          </td>
          <td style="text-align:center;">₹ {{ ci.subtotal }}</td>
        </tr>
        {% endfor %}
      </tbody>
      <tfoot>
        <tr>
          <td colspan="3" style="text-align:right;"><strong>Total</strong></td>
          <td style="text-align:center;"><strong>₹ {{ total }}</strong></td>
        </tr>
      </tfoot>
    </table>
    <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end;">
      <a class="btn secondary" href="{% url 'items_list' %}">Continue shopping</a>
      <a class="btn" href="{% url 'checkout_choose' %}">Checkout</a>
    </div>
  {% else %}
    <p>Your cart is empty.</p>
    <a class="btn" href="{% url 'items_list' %}">Browse items</a>
  {% endif %}
</div>
{% endblock %}
